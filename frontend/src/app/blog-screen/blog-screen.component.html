<div class="container mt-4">
    <div class="row align-items-center">
        <div class="col-sm-1">
            <button class="btn btn-secondary fw-bold back-button" (click)="goBack()">ZurÃ¼ck</button>
        </div>

        <div class="col-md-10 text-center">
            <h2 class="mt-3 fw-bold text-primary">{{ selectedBlogEntry?.title }}</h2>
            <p class="text-muted fst-italic">{{ selectedBlogEntry?.description }}</p>
            <div class="mt-2">
                <span class="badge bg-dark px-3 py-2">by {{ selectedBlogEntry?.author_ids }}</span>
            </div>
        </div>
    </div>

    <div class="mt-4 p-4 bg-light rounded shadow content-text">
        <p class="fs-5">{{ selectedBlogEntry?.content_text }}</p>
    </div>  

    <hr class="mt-5">

    <h3 class="text-center text-primary fw-bold">ðŸ’¬ Kommentare</h3>

    <div class="mt-3 p-4 bg-white shadow-sm rounded comment-section">
        <!-- Kommentar-Eingabeformular -->
        <div class="mb-3">
            <input class="form-control mb-2" [(ngModel)]="newComment.username" placeholder="Dein Name">
            <textarea class="form-control mb-2" rows="3" [(ngModel)]="newComment.text" placeholder="Schreibe einen Kommentar..."></textarea>
            
            <!-- Bild-Upload -->
            <input #fileInput type="file" class="form-control mb-2" multiple (change)="onFileSelected($event)">
            
            <!-- Vorschau der hochgeladenen Bilder -->
            <div class="image-preview-container">
                <div *ngFor="let imageUrl of newComment.imageUrls; let i = index" class="image-preview">
                    <img [src]="imageUrl" class="img-thumbnail">
                    <button class="btn btn-danger btn-sm" (click)="removeImage(i)">
                        <i class="bi bi-trash" style="margin-left: -3px;"></i>
                      </button>
                </div>
            </div>

            <button class="btn btn-primary w-100 mt-2" (click)="addComment()">Kommentar hinzufÃ¼gen</button>
        </div>

        <!-- Kommentare anzeigen -->
        <div *ngFor="let comment of comments" class="comment-box p-3 my-2 bg-light rounded shadow-sm">
            <h5 class="fw-bold">{{ comment.username }}</h5>
            <p class="mb-1">{{ comment.text }}</p>

            <!-- Falls Bilder vorhanden sind, diese anzeigen -->
            <div *ngIf="comment.imageUrls?.length">
                <img *ngFor="let imageUrl of comment.imageUrls" [src]="imageUrl" class="img-fluid rounded mt-2" style="max-width: 200px; margin: 5px;">
            </div>
        </div>
    </div>
</div>
